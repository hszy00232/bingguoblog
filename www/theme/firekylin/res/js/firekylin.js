(function(e,t){var n=function(e){return document.getElementById(e)},r=function(e){e=e||document;var t=e.defaultView||e.parentWindow,n=e.compatMode,r=e.documentElement,i=t.innerHeight||0,s=t.innerWidth||0,o=t.pageXOffset||0,u=t.pageYOffset||0,a=r.scrollWidth,f=r.scrollHeight;return n!="CSS1Compat"&&(r=e.body,a=r.scrollWidth,f=r.scrollHeight),n&&(s=r.clientWidth,i=r.clientHeight),a=Math.max(a,s),f=Math.max(f,i),o=Math.max(o,e.documentElement.scrollLeft,e.body.scrollLeft),u=Math.max(u,e.documentElement.scrollTop,e.body.scrollTop),{width:s,height:i,scrollWidth:a,scrollHeight:f,scrollX:o,scrollY:u}},i=function(e){var t=e.ownerDocument,n=r(t),i=n.scrollX,s=n.scrollY,o=e.getBoundingClientRect(),u=[o.left,o.top],a,f,l;if(s||i)u[0]+=i,u[1]+=s;return u},s=function(e){var t=i(e),n=t[0],r=t[1],s=e.offsetWidth,o=e.offsetHeight;return{width:s,height:o,left:n,top:r,bottom:r+o,right:n+s}},o=function(){var e=n("comments");if(!e)return;var t=function(){var t=e.getAttribute("data-type");t==="disqus"?u():t==="duoshuo"&&a()};if(location.hash.indexOf("#comments")>-1)t();else var i=setInterval(function(){var n=r(),o=n.scrollY+n.height,u=s(e).top;Math.abs(u-o)<1e3&&(t(),clearInterval(i))},300)},u=function(){var e=n("disqus_thread");if(!e)return;window.disqus_config=function(){this.page.url=e.getAttribute("data-url"),this.page.identifier=e.getAttribute("data-identifier")};var r=t.createElement("script");r.src="//"+e.getAttribute("data-name")+".disqus.com/embed.js",r.setAttribute("data-timestamp",+(new Date)),(t.head||t.body).appendChild(r)},a=function(){var e=n("ds_thread");if(!e)return;window.duoshuoQuery={short_name:e.getAttribute("data-name")};var r=document.createElement("script");r.src="//static.duoshuo.com/embed.js",(t.head||t.body).appendChild(r)};window.addEventListener("load",function(){o()});var f={isMob:function(){var e=navigator.userAgent.toLowerCase(),t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!1;for(var r=0;r<t.length;r++)e.indexOf(t[r].toLowerCase())>-1&&(n=!0);return n}()};f.isMob?document.documentElement.className+=" mob":document.documentElement.className+=" pc";var l={$sidebar:document.querySelector("#sidebar"),$main:document.querySelector("#main"),$sidebar_mask:document.querySelector("#sidebar-mask"),$body:document.body,$btn_side:document.querySelector("#header .btn-bar"),$article:document.querySelectorAll(".mob #page-index article")};l.bindEvent=function(){var e=this,t="side",n="click",r="click";f.isMob&&(n="touchstart",r="touchend"),this.$btn_side.addEventListener(r,function(){e.$body.className.indexOf(t)>-1?(e.$body.className=e.$body.className.replace(t,""),e.$sidebar_mask.style.display="none"):(e.$body.className+=" "+t,e.$sidebar_mask.style.display="block")},!1),this.$sidebar_mask.addEventListener(n,function(n){e.$body.className=e.$body.className.replace(t,""),e.$sidebar_mask.style.display="none",n.preventDefault()},!1),window.addEventListener("resize",function(){e.$body.className=e.$body.className.replace(t,""),e.$sidebar_mask.style.display="none"},!1)},l.bindEvent()})(window,document)